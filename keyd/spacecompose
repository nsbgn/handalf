# Double-tapping space and holding it while typing a compose key sequence will
# remove the space from the first tap and insert the compose key before the
# sequence. This is a good use of overloading because (1) the space key will
# still appear instantaneously during normal typing; (2) any compose key
# sequence only makes sense during regular typing, so the fact that we inject a
# backspace to 'backtrack' is fine; and (3)  we can use overloadt2 to mitigate
# the risk that a 'normal' double space tap is interpreted as a compose key
# sequence, but the subsequent requirement that, for a compose sequence to
# trigger, the keyup of the space *must* occur after the keyup of the first
# key, is unlikely to lead to misfiring, because a compose sequence consists of
# at least two keys anyway.
#
# Issue: stacking modifiers
# Issue: multiple compose sequences?

[main]
space = oneshotm(spaced, space)

[spaced]
space = timeout(overloadt2(composed, oneshotm(spaced, space), 150), 400, space)

[empty]

[composed]
q = swapm(empty, macro(backspace rightmeta q))
w = swapm(empty, macro(backspace rightmeta w))
e = swapm(empty, macro(backspace rightmeta e))
r = swapm(empty, macro(backspace rightmeta r))
t = swapm(empty, macro(backspace rightmeta t))
a = swapm(empty, macro(backspace rightmeta a))
s = swapm(empty, macro(backspace rightmeta s))
d = swapm(empty, macro(backspace rightmeta d))
f = swapm(empty, macro(backspace rightmeta f))
g = swapm(empty, macro(backspace rightmeta g))
z = swapm(empty, macro(backspace rightmeta z))
x = swapm(empty, macro(backspace rightmeta x))
c = swapm(empty, macro(backspace rightmeta c))
v = swapm(empty, macro(backspace rightmeta v))
b = swapm(empty, macro(backspace rightmeta b))
y = swapm(empty, macro(backspace rightmeta y))
u = swapm(empty, macro(backspace rightmeta u))
i = swapm(empty, macro(backspace rightmeta i))
o = swapm(empty, macro(backspace rightmeta o))
p = swapm(empty, macro(backspace rightmeta p))
[ = swapm(empty, macro(backspace rightmeta [))
h = swapm(empty, macro(backspace rightmeta h))
j = swapm(empty, macro(backspace rightmeta j))
k = swapm(empty, macro(backspace rightmeta k))
l = swapm(empty, macro(backspace rightmeta l))
; = swapm(empty, macro(backspace rightmeta ;))
' = swapm(empty, macro(backspace rightmeta '))
n = swapm(empty, macro(backspace rightmeta n))
m = swapm(empty, macro(backspace rightmeta m))
, = swapm(empty, macro(backspace rightmeta ,))
. = swapm(empty, macro(backspace rightmeta .))
/ = swapm(empty, macro(backspace rightmeta /))



































































